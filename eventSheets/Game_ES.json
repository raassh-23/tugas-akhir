{
	"name": "Game_ES",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving-direction",
							"objectClass": "Player",
							"sid": 475111560688082,
							"behaviorType": "TileMovement",
							"parameters": {
								"direction": "up"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "Player",
							"sid": 766191634975463,
							"parameters": {
								"angle": "270"
							}
						}
					],
					"sid": 863602840210174
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving-direction",
							"objectClass": "Player",
							"sid": 988121793653671,
							"behaviorType": "TileMovement",
							"parameters": {
								"direction": "down"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "Player",
							"sid": 784253512850511,
							"parameters": {
								"angle": "90"
							}
						}
					],
					"sid": 902167252475206
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving-direction",
							"objectClass": "Player",
							"sid": 740731637376706,
							"behaviorType": "TileMovement",
							"parameters": {
								"direction": "right"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "Player",
							"sid": 184500807959852,
							"parameters": {
								"angle": "0"
							}
						}
					],
					"sid": 588675450775070
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving-direction",
							"objectClass": "Player",
							"sid": 443101179444912,
							"behaviorType": "TileMovement",
							"parameters": {
								"direction": "left"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "Player",
							"sid": 137826012606294,
							"parameters": {
								"angle": "180"
							}
						}
					],
					"sid": 107470390766072
				}
			],
			"sid": 296174398600597
		},
		{
			"eventType": "variable",
			"name": "isRunning",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 633749470522791
		},
		{
			"eventType": "variable",
			"name": "isDragging",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 907360693346189
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Command",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 633731294598576
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "setRunner(runtime);"
						},
						{
							"id": "set-visible",
							"objectClass": "CodeBlockShadow",
							"sid": 520005156630820,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 129943425259161,
							"parameters": {
								"layer": "\"UI\"",
								"visibility": "visible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 280855192074578,
							"parameters": {
								"layer": "\"UI\"",
								"interactive": true
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 613241368539942,
							"parameters": {
								"layer": "\"Game\"",
								"interactive": true
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 780955087097625,
							"parameters": {
								"layer": "\"RepeatPopUp\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 706161774889017,
							"parameters": {
								"layer": "\"PopUpBG\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 739571697606556,
							"parameters": {
								"layer": "\"RepeatPopUp\"",
								"interactive": false
							}
						}
					],
					"sid": 612593316670721
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 372248058485151,
							"parameters": {
								"object": "CodeBlockButton"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 805787981559465,
							"parameters": {
								"variable": "isDragging"
							},
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 358341498941192,
							"parameters": {
								"variable": "isRunning"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"callFunction": "CreateNewCommandObject",
							"sid": 877951979428640,
							"parameters": [
								"CodeBlockButton.commandName",
								"CodeBlockButton.LayerName",
								"CodeBlockButton.panelId",
								"CodeBlockButton.X",
								"CodeBlockButton.Y",
								"CodeBlockButton.commandFrame"
							]
						}
					],
					"sid": 779430353187203
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "CodeBlock",
							"sid": 249464404143076,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [],
					"sid": 811373202969291,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 632175319931117,
									"parameters": {
										"variable": "isDragging"
									}
								}
							],
							"actions": [
								{
									"callFunction": "PseudoDropCommand",
									"sid": 162695499001214
								}
							],
							"sid": 190273193972901
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 941327846399168,
									"parameters": {
										"variable": "isDragging"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "ClampScrollable",
									"sid": 175402015779733
								},
								{
									"type": "comment",
									"text": "first call to saveCommandPosition, just in case the position changed because of scroll"
								},
								{
									"callFunction": "SaveAllCommandPosition",
									"sid": 527987029291519
								}
							],
							"sid": 490257851542919,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "CodeBlock",
											"sid": 755668526747739,
											"parameters": {
												"instance-variable": "isActive"
											}
										}
									],
									"actions": [],
									"sid": 617538421159356,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-touching-object",
													"objectClass": "Touch",
													"sid": 842826187155457,
													"parameters": {
														"object": "CodeBlockDecoration"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "CodeBlockDecoration",
													"sid": 193934222847242,
													"parameters": {
														"instance-variable": "clickable"
													}
												}
											],
											"actions": [
												{
													"callFunction": "PseudoDropCommand",
													"sid": 957700593258325
												}
											],
											"sid": 498218052688895
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 208283986643748
												}
											],
											"actions": [
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 922136276958906,
													"parameters": {
														"variable": "isDragging",
														"value": "true"
													}
												},
												{
													"type": "script",
													"script": "removeCodeBlock(\n\truntime.objects.CodeBlock.getFirstPickedInstance()\n);"
												},
												{
													"callFunction": "SetCommandActive",
													"sid": 149720674450295,
													"parameters": [
														false
													]
												},
												{
													"callFunction": "ShiftActiveCommands",
													"sid": 460664071702417,
													"parameters": [
														"CodeBlock.X",
														"-CodeBlock.Width",
														"CodeBlock.panelId"
													]
												},
												{
													"type": "comment",
													"text": "second call saveCommandPosition, after shifting active position without the dragged command"
												},
												{
													"callFunction": "SaveAllCommandPosition",
													"sid": 195177666138114
												}
											],
											"sid": 610675001549488
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "CodeBlock",
							"sid": 105475288078458,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "resetContainerLength(\n\truntime.objects.CodeBlockContainer.getAllInstances()\n);"
						}
					],
					"sid": 601895820222359,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "CodeBlock",
									"sid": 449688868599534,
									"parameters": {
										"object": "UIPanel"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "CodeBlockShadow",
									"sid": 416585136568669,
									"parameters": {
										"unique-id": "Functions.PickCodeBlockShadowToShow"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ShowCommandShadow",
									"sid": 600451405210850,
									"parameters": [
										"CodeBlockShadow.UID",
										"CodeBlock.Width"
									]
								},
								{
									"callFunction": "ShiftActiveCommands",
									"sid": 229035459114190,
									"parameters": [
										"CodeBlockShadow.X",
										"CodeBlock.Width",
										"CodeBlock.panelId"
									]
								}
							],
							"sid": 519996175298180
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 334739427962197
								}
							],
							"actions": [
								{
									"callFunction": "ResetActiveCommands",
									"sid": 733125477755939
								}
							],
							"sid": 441139817013168
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drop",
							"objectClass": "CodeBlock",
							"sid": 383493508569320,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 383263006390166,
							"parameters": {
								"variable": "isDragging",
								"value": "false"
							}
						}
					],
					"sid": 700328896884350,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "CodeBlock",
									"sid": 698934258384565,
									"parameters": {
										"object": "UIPanel"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "CodeBlockShadow",
									"sid": 955845818909923,
									"parameters": {
										"unique-id": "Functions.PickCodeBlockShadowToShow"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "addCodeBlock(\n\truntime.objects.CodeBlock.getFirstPickedInstance(), \n\truntime.objects.CodeBlockShadow.getFirstPickedInstance()\n);"
								},
								{
									"callFunction": "SetCommandActive",
									"sid": 786197012970962,
									"parameters": [
										true
									]
								},
								{
									"callFunction": "SaveAllCommandPosition",
									"sid": 786191275505392
								}
							],
							"sid": 467262502036328,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "CodeBlock",
											"sid": 143959790758397,
											"parameters": {
												"instance-variable": "isNew"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 101291866065228,
											"parameters": {
												"first-value": "CodeBlock.ObjectTypeName",
												"comparison": 0,
												"second-value": "RepeatCommand.ObjectTypeName"
											}
										}
									],
									"actions": [
										{
											"callFunction": "CreateRepeatPanel",
											"sid": 902347418959187,
											"parameters": [
												"CodeBlock.UID"
											]
										},
										{
											"callFunction": "SetRepeatCommandPopUp",
											"sid": 913863607617931,
											"parameters": [
												true
											]
										}
									],
									"sid": 454089006255226
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "CodeBlock",
											"sid": 995441758031844,
											"parameters": {
												"instance-variable": "isNew",
												"value": "false"
											}
										}
									],
									"sid": 134334595025956
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 918843759382303
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "CodeBlock",
									"sid": 530019295501329
								}
							],
							"sid": 839084713117325
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "ResetActiveCommands",
									"sid": 916117884772811
								}
							],
							"sid": 564390162512832
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 103291109259663,
							"parameters": {
								"variable": "isRunning"
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "CodeBlock",
							"sid": 140642294707258,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						}
					],
					"sid": 403063728362583
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 714703869965483,
							"parameters": {
								"variable": "isRunning"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "CodeBlock",
							"sid": 357654306297957,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "enabled"
							}
						}
					],
					"sid": 980071856682603
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 869221494398815,
							"parameters": {
								"object": "Button"
							}
						}
					],
					"actions": [],
					"sid": 636861811058508,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 607763085229581,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"play\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"running commands\")\n\nrunner.run(runtime.objects.Player.getFirstInstance())"
								}
							],
							"sid": 617062141404167
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 732428580329747,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"close-repeat-panel\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "SetRepeatCommandPopUp",
									"sid": 757129285265886,
									"parameters": [
										false
									]
								}
							],
							"sid": 279507632404491
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 768927338990605,
							"parameters": {
								"object": "CodeBlockDecoration"
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 704770514676817,
							"parameters": {
								"variable": "isRunning"
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "CodeBlockDecoration",
							"sid": 718450816205202,
							"parameters": {
								"instance-variable": "clickable"
							}
						},
						{
							"id": "pick-parent",
							"objectClass": "CodeBlockDecoration",
							"sid": 644496866020076,
							"parameters": {
								"parent": "CodeBlock",
								"which": "own"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "CodeBlock",
							"sid": 852886327909860,
							"parameters": {
								"instance-variable": "isActive"
							}
						}
					],
					"actions": [],
					"sid": 837960848733366,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "CodeBlockDecoration",
									"sid": 729968225198742,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"repeat-pop-up\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "SetRepeatCommandPopUp",
									"sid": 204782987644485,
									"parameters": [
										true
									]
								}
							],
							"sid": 170814303741394
						}
					]
				},
				{
					"functionName": "CreateNewCommandObject",
					"functionCopyPicked": false,
					"functionDescription": "",
					"functionCategory": "Creation",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "objectTypeName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 279397482552838
						},
						{
							"name": "layer",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 555107669347700
						},
						{
							"name": "panelId",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 296933171270584
						},
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 423610438519916
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 946925253570329
						},
						{
							"name": "frame",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 693891882739728
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 964975778414463,
							"parameters": {
								"object-name": "objectTypeName",
								"layer": "layer",
								"x": "x",
								"y": "y",
								"create-hierarchy": true,
								"template-name": "\"\""
							}
						}
					],
					"sid": 865708086403614,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-last-created",
									"objectClass": "System",
									"sid": 861853366766292,
									"parameters": {
										"object": "CodeBlock"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "CodeBlock",
									"sid": 677276863416670,
									"parameters": {
										"instance-variable": "panelId",
										"value": "panelId"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "CodeBlock",
									"sid": 797057774665729,
									"parameters": {
										"frame-number": "frame"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "CodeBlock",
									"sid": 163339409386643,
									"parameters": {
										"instance-variable": "inactiveLayer",
										"value": "CodeBlock.LayerName"
									}
								}
							],
							"sid": 165605925101653,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 733820547203053,
											"parameters": {
												"first-value": "CodeBlock.ObjectTypeName",
												"comparison": 0,
												"second-value": "MoveCommand.ObjectTypeName"
											}
										}
									],
									"actions": [
										{
											"type": "script",
											"script": "runtime.objects.MoveCommand.getFirstPickedInstance().setDirection();"
										}
									],
									"sid": 855362274247266
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "UIPanel",
											"sid": 950349078233028,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "panelId"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "CodeBlock",
											"sid": 608468958125916,
											"parameters": {
												"instance-variable": "activeLayer",
												"value": "UIPanel.LayerName"
											}
										}
									],
									"sid": 960181835098591
								}
							]
						}
					]
				},
				{
					"functionName": "PickCodeBlockShadowToShow",
					"functionCopyPicked": true,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "number",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "UIPanel",
							"sid": 571618387399834,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "CodeBlock.panelId"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "UIPanel",
							"sid": 277210527820270,
							"parameters": {
								"child": "CodeBlockShadow",
								"which": "all"
							}
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "const pickedUid = pickCodeBlockShadowToShow(\n\truntime.objects.CodeBlock.getFirstPickedInstance(), \n\truntime.objects.CodeBlockShadow.getPickedInstances()\n);\n\nruntime.setReturnValue(pickedUid);"
						}
					],
					"sid": 844392995573375
				},
				{
					"functionName": "ShowCommandShadow",
					"functionCopyPicked": false,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "uid",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 327133150412776
						},
						{
							"name": "width",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 139360883236464
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 507891514867109,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "CodeBlockShadow",
									"sid": 210826752216630,
									"parameters": {
										"unique-id": "uid"
									}
								}
							],
							"actions": [
								{
									"id": "set-width",
									"objectClass": "CodeBlockShadow",
									"sid": 530368725327204,
									"parameters": {
										"width": "width"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "CodeBlockShadow",
									"sid": 680710672509710,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "CodeBlockShadow",
									"sid": 957981212230179,
									"disabled": true,
									"parameters": {
										"opacity": "100"
									}
								},
								{
									"type": "script",
									"script": "expandCodeBlockShadowContainer(\n\truntime.objects.CodeBlockShadow.getFirstPickedInstance()\n);"
								}
							],
							"sid": 406506094909100
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "CodeBlockShadow",
									"sid": 902610674637343,
									"parameters": {
										"unique-id": "uid"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "CodeBlockShadow",
									"sid": 866409674706101,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-width",
									"objectClass": "CodeBlockShadow",
									"sid": 603996913368066,
									"disabled": true,
									"parameters": {
										"width": "20"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "CodeBlockShadow",
									"sid": 816863677467872,
									"disabled": true,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "CodeBlockShadow",
									"sid": 820391881671397,
									"disabled": true,
									"parameters": {
										"opacity": "50"
									}
								}
							],
							"sid": 275641822109083
						}
					]
				},
				{
					"functionName": "SaveAllCommandPosition",
					"functionCopyPicked": false,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "CodeBlock",
							"sid": 976829372847574,
							"behaviorType": "DragDrop",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "CodeBlock",
							"sid": 361455050993134,
							"parameters": {
								"instance-variable": "savedX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "CodeBlock",
							"sid": 885893630173229,
							"parameters": {
								"instance-variable": "savedY",
								"value": "Self.Y"
							}
						}
					],
					"sid": 771571373680666
				},
				{
					"functionName": "ResetActiveCommands",
					"functionCopyPicked": false,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "CodeBlockShadow",
							"sid": 582033822433389,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "CodeBlockShadow",
							"sid": 207771721956895,
							"disabled": true,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "CodeBlockShadow",
							"sid": 774939580360602,
							"disabled": true,
							"parameters": {
								"opacity": "50"
							}
						}
					],
					"sid": 873994074074811,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "CodeBlock",
									"sid": 412846268345532,
									"parameters": {
										"instance-variable": "isActive"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "CodeBlock",
									"sid": 609721035812358,
									"parameters": {
										"x": "Self.savedX",
										"y": "Self.savedY"
									}
								}
							],
							"sid": 583333230263145
						}
					]
				},
				{
					"functionName": "ShiftActiveCommands",
					"functionCopyPicked": false,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 332633950558545
						},
						{
							"name": "deltaWidth",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 918415430987728
						},
						{
							"name": "panelId",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 564771456022084
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "CodeBlock",
							"sid": 470122634964503,
							"parameters": {
								"instance-variable": "isActive"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "CodeBlock",
							"sid": 454283230734975,
							"parameters": {
								"instance-variable": "panelId",
								"comparison": 0,
								"value": "panelId"
							}
						}
					],
					"actions": [],
					"sid": 836732642885252,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "CodeBlock",
									"sid": 903939847691734,
									"parameters": {
										"comparison": 5,
										"x-co-ordinate": "x"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "CodeBlock",
									"sid": 343885558079173,
									"parameters": {
										"x": "Self.savedX + deltaWidth"
									}
								}
							],
							"sid": 266846760091196
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "CodeBlock",
									"sid": 239901978611058,
									"parameters": {
										"comparison": 2,
										"x-co-ordinate": "x"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "CodeBlock",
									"sid": 319641890094181,
									"parameters": {
										"x": "Self.savedX"
									}
								}
							],
							"sid": 827707683916332
						}
					]
				},
				{
					"functionName": "PseudoDropCommand",
					"functionCopyPicked": true,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "workaround for drop, since it will trigger on drop otherwise"
						},
						{
							"id": "set-enabled",
							"objectClass": "CodeBlock",
							"sid": 211633811022142,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "CodeBlock",
							"sid": 746069108089153,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "enabled"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 700668212957238,
							"parameters": {
								"variable": "isDragging",
								"value": "false"
							}
						}
					],
					"sid": 196580022289217
				},
				{
					"functionName": "SetCommandActive",
					"functionCopyPicked": true,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "active",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 844070350336243
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "script",
							"script": "runtime.objects.CodeBlock.getFirstPickedInstance().setActive(localVars.active);"
						}
					],
					"sid": 917542497394645
				},
				{
					"functionName": "CreateRepeatPanel",
					"functionCopyPicked": false,
					"functionDescription": "",
					"functionCategory": "Creation",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "CommandUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 341794966421238
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 568375567010527,
							"parameters": {
								"object-to-create": "UIPanel",
								"layer": "\"RepeatPopUp\"",
								"x": "360",
								"y": "195",
								"create-hierarchy": true,
								"template-name": "\"repeat-panel\""
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "UIPanel",
							"sid": 221559447631925,
							"parameters": {
								"instance-variable": "id",
								"value": "\"repeat-panel-\" & CommandUID"
							}
						}
					],
					"sid": 379836071766930,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "UIPanel",
									"sid": 785699762334511,
									"parameters": {
										"child": "ScrollablePanel",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "ScrollablePanel",
									"sid": 744444955249177,
									"parameters": {
										"instance-variable": "min",
										"value": "Self.x"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "ScrollablePanel",
									"sid": 731336074827253,
									"parameters": {
										"instance-variable": "max",
										"value": "Self.x"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "ScrollablePanel",
									"sid": 657829016577692,
									"parameters": {
										"instance-variable": "id",
										"value": "\"repeat-condition-container-\" & CommandUID"
									}
								},
								{
									"callFunction": "SetupScrollable",
									"sid": 671124101393450
								}
							],
							"sid": 235133904057371
						}
					]
				},
				{
					"functionName": "SetRepeatCommandPopUp",
					"functionCopyPicked": true,
					"functionDescription": "",
					"functionCategory": "Command",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 173775435609845
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 160238235502287,
					"children": [
						{
							"eventType": "variable",
							"name": "commandUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 696567053510880
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 655700556800280,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "pickedCommand = runtime.objects.CodeBlock.getFirstPickedInstance();\nlocalVars.commandUID = pickedCommand.uid;"
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 912839437537525,
									"parameters": {
										"seconds": "0.01"
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 522706185001612,
									"parameters": {
										"layer": "\"RepeatPopUp\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 997163383053882,
									"parameters": {
										"layer": "\"RepeatPopUp\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 529640410297878,
									"parameters": {
										"layer": "\"PopUpBG\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 847011408991639,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 270833738647944,
									"parameters": {
										"layer": "\"Game\"",
										"interactive": false
									}
								}
							],
							"sid": 732126660412832,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "UIPanel",
											"sid": 169798839097104,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "\"repeat-panel-\"&commandUID"
											}
										}
									],
									"actions": [
										{
											"id": "set-y",
											"objectClass": "UIPanel",
											"sid": 977843449994301,
											"parameters": {
												"y": "195"
											}
										}
									],
									"sid": 539258048409977
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-layer",
											"objectClass": "CodeBlockButton",
											"sid": 317715571403065,
											"parameters": {
												"layer": "\"RepeatPopUp\""
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "CodeBlockButton",
											"sid": 991028388431046,
											"parameters": {
												"instance-variable": "panelId",
												"value": "\"repeat-panel-\"&commandUID"
											}
										}
									],
									"sid": 597884381165409
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 244168721918488
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "localVars.commandUID = pickedCommand.uid;"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 428170449038282,
									"parameters": {
										"layer": "\"RepeatPopUp\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 129973143653514,
									"parameters": {
										"layer": "\"RepeatPopUp\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 502094075560556,
									"parameters": {
										"layer": "\"PopUpBG\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 959378504253386,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 706136747177540,
									"parameters": {
										"layer": "\"Game\"",
										"interactive": true
									}
								}
							],
							"sid": 919741396589432,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "UIPanel",
											"sid": 221769976074678,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "\"repeat-panel-\"&commandUID"
											}
										}
									],
									"actions": [
										{
											"id": "set-y",
											"objectClass": "UIPanel",
											"sid": 906545985746101,
											"parameters": {
												"y": "-1000"
											}
										}
									],
									"sid": 399489039364866,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-all",
													"objectClass": "System",
													"sid": 611474979515393,
													"parameters": {
														"object": "RepeatCommandCondition"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "UIPanel",
													"sid": 620888842605977,
													"parameters": {
														"child": "RepeatCommandCondition",
														"which": "all"
													}
												}
											],
											"actions": [
												{
													"type": "script",
													"script": "const count = runtime.objects.RepeatCommandCondition\n\t.getFirstPickedInstance().evaluate();\npickedCommand.setRepeatCount(count);"
												}
											],
											"sid": 388284699747584
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "script",
											"script": "pickedCommand = null;"
										}
									],
									"sid": 415079790443509
								}
							]
						}
					]
				}
			],
			"sid": 446028862137096
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Scrollable",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 380543177930933
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 619648017095190,
							"parameters": {
								"object": "ScrollablePanel"
							}
						}
					],
					"actions": [
						{
							"callFunction": "SetupScrollable",
							"sid": 891364584265743
						}
					],
					"sid": 843074771632739
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "ScrollablePanel",
							"sid": 374903853276763,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [],
					"sid": 315693940068405,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 517000797714432,
									"parameters": {
										"object": "UIPanel"
									},
									"isInverted": true
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 591124741407882,
									"parameters": {
										"object": "CodeBlock"
									}
								}
							],
							"actions": [
								{
									"id": "drop",
									"objectClass": "ScrollablePanel",
									"sid": 941053151681527,
									"behaviorType": "DragDrop"
								}
							],
							"sid": 413518804764320,
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "ScrollablePanel",
							"sid": 482056115396361,
							"behaviorType": "DragDrop",
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 484238256017660,
							"parameters": {
								"variable": "isDragging"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 756258114516809,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ScrollablePanel",
									"sid": 529580256884604,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"horizontal\""
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "ScrollablePanel",
									"sid": 549498229918273,
									"parameters": {
										"x": "lerp(Self.X, clamp(Self.X, Self.min, Self.max), 20*dt)"
									}
								}
							],
							"sid": 851818603089367
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ScrollablePanel",
									"sid": 717257063338861,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"vertical\""
									}
								}
							],
							"actions": [
								{
									"id": "set-y",
									"objectClass": "ScrollablePanel",
									"sid": 116672886451970,
									"parameters": {
										"y": "lerp(Self.Y, clamp(Self.Y, Self.min, Self.max), 20*dt)"
									}
								}
							],
							"sid": 953659433717919
						}
					]
				},
				{
					"functionName": "SetupScrollable",
					"functionCopyPicked": true,
					"functionDescription": "",
					"functionCategory": "Scrollable",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "ScrollablePanel",
							"sid": 999421901934492,
							"parameters": {
								"instance-variable": "initialMin",
								"value": "Self.min"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ScrollablePanel",
							"sid": 977567866777639,
							"parameters": {
								"instance-variable": "initialMax",
								"value": "Self.max"
							}
						}
					],
					"sid": 694572370150040,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ScrollablePanel",
									"sid": 303516222503516,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"horizontal\""
									}
								}
							],
							"actions": [
								{
									"id": "set-axes",
									"objectClass": "ScrollablePanel",
									"sid": 161120041003561,
									"behaviorType": "DragDrop",
									"parameters": {
										"axes": "horizontal-only"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "ScrollablePanel",
									"sid": 257828593593592,
									"parameters": {
										"instance-variable": "initialLength",
										"value": "Self.Width"
									}
								}
							],
							"sid": 136209254026289
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ScrollablePanel",
									"sid": 559721543872491,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"vertical\""
									}
								}
							],
							"actions": [
								{
									"id": "set-axes",
									"objectClass": "ScrollablePanel",
									"sid": 554895299734318,
									"behaviorType": "DragDrop",
									"parameters": {
										"axes": "vertical-only"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "ScrollablePanel",
									"sid": 493776090031825,
									"parameters": {
										"instance-variable": "initialLength",
										"value": "Self.Height"
									}
								}
							],
							"sid": 409316329420441
						}
					]
				},
				{
					"functionName": "ClampScrollable",
					"functionCopyPicked": true,
					"functionDescription": "",
					"functionCategory": "Scrollable",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 618000235228571,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ScrollablePanel",
									"sid": 436273219811483,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"horizontal\""
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "ScrollablePanel",
									"sid": 418523084741489,
									"parameters": {
										"x": "clamp(Self.X, Self.min, Self.max)"
									}
								}
							],
							"sid": 834844615766632
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ScrollablePanel",
									"sid": 442721366709410,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"vertical\""
									}
								}
							],
							"actions": [
								{
									"id": "set-y",
									"objectClass": "ScrollablePanel",
									"sid": 406012765250572,
									"parameters": {
										"y": "clamp(Self.Y, Self.min, Self.max)"
									}
								}
							],
							"sid": 107023226186674
						}
					]
				}
			],
			"sid": 813875990020546
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "PanAndZoom",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "TouchPanID",
					"type": "number",
					"initialValue": "-1",
					"comment": "ID of the touch using to pan",
					"isStatic": true,
					"isConstant": false,
					"sid": 161592618937485
				},
				{
					"eventType": "variable",
					"name": "TouchZoomID",
					"type": "number",
					"initialValue": "-1",
					"comment": "ID of second touch using to zoom",
					"isStatic": true,
					"isConstant": false,
					"sid": 833069046728089
				},
				{
					"eventType": "variable",
					"name": "TouchLastX",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial X position of touch (for pan)",
					"isStatic": true,
					"isConstant": false,
					"sid": 924761276669851
				},
				{
					"eventType": "variable",
					"name": "TouchLastY",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial Y position of touch (for pan)",
					"isStatic": true,
					"isConstant": false,
					"sid": 497000473213126
				},
				{
					"eventType": "variable",
					"name": "TouchStartDistance",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial distance apart of touches (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 612541891773322
				},
				{
					"eventType": "variable",
					"name": "InitialScale",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial scale of layout (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 273236510037230
				},
				{
					"eventType": "variable",
					"name": "minScale",
					"type": "number",
					"initialValue": "0.5",
					"comment": "Minimal scale of layout (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 345602677849194
				},
				{
					"eventType": "variable",
					"name": "MaxScale",
					"type": "number",
					"initialValue": "2",
					"comment": "Max scale of layout (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 610432664717117
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 839272285833839
						}
					],
					"actions": [
						{
							"callFunction": "ResetPanAndZoomVariable",
							"sid": 457925344639206
						}
					],
					"sid": 356182281223981
				},
				{
					"functionName": "ResetPanAndZoomVariable",
					"functionCopyPicked": false,
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 817131976166261,
							"parameters": {
								"variable": "TouchPanID",
								"value": "-1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 401887750081888,
							"parameters": {
								"variable": "TouchZoomID",
								"value": "-1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 907610906557412,
							"parameters": {
								"variable": "TouchLastX",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 427743683782849,
							"parameters": {
								"variable": "TouchLastY",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 473842760952508,
							"parameters": {
								"variable": "TouchStartDistance",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 349077111216098,
							"parameters": {
								"variable": "InitialScale",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 368881673825692,
							"parameters": {
								"variable": "minScale",
								"value": "max(0.5, ViewportWidth(\"UI\")/LayoutWidth, ViewportHeight(\"UI\")/LayoutHeight)"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 242257219406356,
							"parameters": {
								"variable": "MaxScale",
								"value": "2"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 220827454472132,
							"parameters": {
								"layer": "\"Game\"",
								"scale": "1"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 463342184230325,
							"parameters": {
								"layer": "\"BG\"",
								"scale": "1"
							}
						}
					],
					"sid": 461768963606270
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-touch-start",
							"objectClass": "Touch",
							"sid": 895551981849635
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 325412529699071,
							"parameters": {
								"variable": "isDragging"
							},
							"isInverted": true
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 564305442787834,
							"parameters": {
								"object": "ScrollablePanel"
							},
							"isInverted": true
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 273649699260039,
							"parameters": {
								"object": "Button"
							},
							"isInverted": true
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 907941479481171,
							"parameters": {
								"object": "CodeBlock"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 848413694163041,
					"children": [
						{
							"eventType": "comment",
							"text": "If the user touches, and we're not already panning with a different touch, store the touch ID and the position of the touch. Note we get the position of the touch from a separate layer which has a parallax of 0, otherwise panning the view would alter the reported touch position, resulting in confusing feedback loops."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 916978855495560,
									"parameters": {
										"variable": "TouchPanID",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 139439842657346,
									"parameters": {
										"variable": "TouchLastX",
										"value": "Touch.X(\"UI\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 140228297625579,
									"parameters": {
										"variable": "TouchLastY",
										"value": "Touch.Y(\"UI\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 509561658259608,
									"parameters": {
										"variable": "TouchPanID",
										"value": "Touch.TouchID"
									}
								}
							],
							"sid": 928213317797891
						},
						{
							"eventType": "comment",
							"text": "Otherwise if we're already panning with a touch, this must be a second touch. Use this second touch to zoom the display. We need to remember the starting distance apart of the touches, as well as the starting layout scale, in order to calculate the zoom. Also store the mid-point of the touches, so we can still pan while zooming."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 723747168300825
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 225870624493617,
									"parameters": {
										"variable": "TouchZoomID",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 326149270541433,
									"parameters": {
										"variable": "TouchZoomID",
										"value": "Touch.TouchID"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 862259846025292,
									"parameters": {
										"variable": "TouchStartDistance",
										"value": "distance(Touch.XForID(TouchPanID, \"UI\"), Touch.YForID(TouchPanID, \"UI\"), Touch.XForID(TouchZoomID, \"UI\"), Touch.YForID(TouchZoomID, \"UI\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 949365097035407,
									"parameters": {
										"variable": "InitialScale",
										"value": "LayerScale(\"Game\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 743924016523870,
									"parameters": {
										"variable": "TouchLastX",
										"value": "(Touch.XForID(TouchPanID, \"UI\") + Touch.XForID(TouchZoomID, \"UI\")) / 2"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 240907681633896,
									"parameters": {
										"variable": "TouchLastY",
										"value": "(Touch.YForID(TouchPanID, \"UI\") + Touch.YForID(TouchZoomID, \"UI\")) / 2"
									}
								}
							],
							"sid": 437236401635881
						}
					]
				},
				{
					"eventType": "comment",
					"text": "While we have a touch to pan with, and we're not zooming, offset the scroll position by the change in position of the touch. This makes the view scroll with the touch. Note we also need to take in to account the layout scale to pan correctly at different zoom levels."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 631222044102406,
							"parameters": {
								"variable": "TouchPanID",
								"comparison": 1,
								"value": "-1"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 714890110629824,
							"parameters": {
								"variable": "TouchZoomID",
								"comparison": 0,
								"value": "-1"
							}
						},
						{
							"id": "layer-is-visible",
							"objectClass": "System",
							"sid": 839402406437740,
							"parameters": {
								"layer": "\"PopUpBG\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 361298613695987,
							"parameters": {
								"x": "scrollx - (Touch.X(\"UI\") - TouchLastX) / LayerScale(\"Game\")",
								"y": "scrolly - (Touch.Y(\"UI\") - TouchLastY) / LayerScale(\"Game\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 461562997183620,
							"parameters": {
								"variable": "TouchLastX",
								"value": "Touch.X(\"UI\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 334597773391909,
							"parameters": {
								"variable": "TouchLastY",
								"value": "Touch.Y(\"UI\")"
							}
						}
					],
					"sid": 234744810043690
				},
				{
					"eventType": "comment",
					"text": "If there is a second touch we're zooming with, adjust the layout scale based on the distance between the touches. Also calculate the new mid-point of the two touches and keep panning based on that."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 822666045859556,
							"parameters": {
								"variable": "TouchZoomID",
								"comparison": 1,
								"value": "-1"
							}
						},
						{
							"id": "layer-is-visible",
							"objectClass": "System",
							"sid": 618834679803551,
							"parameters": {
								"layer": "\"PopUpBG\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 944513914637492,
					"children": [
						{
							"eventType": "variable",
							"name": "TouchCurrentDistance",
							"type": "number",
							"initialValue": "0",
							"comment": "The current distance apart of the touches (for zoom)",
							"isStatic": false,
							"isConstant": false,
							"sid": 603626711099878
						},
						{
							"eventType": "variable",
							"name": "TouchCurrentMidX",
							"type": "number",
							"initialValue": "0",
							"comment": "The current average position of the touches for panning while zooming",
							"isStatic": false,
							"isConstant": false,
							"sid": 730691565252703
						},
						{
							"eventType": "variable",
							"name": "TouchCurrentMidY",
							"type": "number",
							"initialValue": "0",
							"comment": "The current average position of the touches for panning while zooming",
							"isStatic": false,
							"isConstant": false,
							"sid": 120953165705174
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 386221772541407,
									"parameters": {
										"variable": "TouchCurrentMidX",
										"value": "(Touch.XForID(TouchPanID, \"UI\") + Touch.XForID(TouchZoomID, \"UI\")) / 2"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 536892723249615,
									"parameters": {
										"variable": "TouchCurrentMidY",
										"value": "(Touch.YForID(TouchPanID, \"UI\") + Touch.YForID(TouchZoomID, \"UI\")) / 2"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 161400669003333,
									"parameters": {
										"variable": "TouchCurrentDistance",
										"value": "distance(Touch.XForID(TouchPanID, \"UI\"), Touch.YForID(TouchPanID, \"UI\"), Touch.XForID(TouchZoomID, \"UI\"), Touch.YForID(TouchZoomID, \"UI\"))"
									}
								},
								{
									"id": "set-layer-scale",
									"objectClass": "System",
									"sid": 319146931744190,
									"parameters": {
										"layer": "\"Game\"",
										"scale": "clamp(InitialScale * (TouchCurrentDistance / TouchStartDistance), minScale, MaxScale)"
									}
								},
								{
									"id": "set-layer-scale",
									"objectClass": "System",
									"sid": 358446847239992,
									"parameters": {
										"layer": "\"BG\"",
										"scale": "LayerScale(\"game\")"
									}
								},
								{
									"id": "scroll-to-position",
									"objectClass": "System",
									"sid": 113404270483840,
									"parameters": {
										"x": "scrollx - (TouchCurrentMidX - TouchLastX) / LayerScale(\"Game\")",
										"y": "scrolly - (TouchCurrentMidY - TouchLastY) / LayerScale(\"Game\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 522118094723941,
									"parameters": {
										"variable": "TouchLastX",
										"value": "TouchCurrentMidX"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 890155692785387,
									"parameters": {
										"variable": "TouchLastY",
										"value": "TouchCurrentMidY"
									}
								}
							],
							"sid": 136837161001928
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When the touch we are panning or zooming with ends, reset the stored touch ID so we stop the action."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-touch-end",
							"objectClass": "Touch",
							"sid": 638097238338961
						}
					],
					"actions": [],
					"sid": 167819352206507,
					"children": [
						{
							"eventType": "comment",
							"text": "If we stop the first (panning) touch while zooming, make the second (zooming) touch become the new panning touch."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 731496051977863,
									"parameters": {
										"variable": "TouchPanID",
										"comparison": 0,
										"value": "Touch.TouchID"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 906202711891398,
									"parameters": {
										"variable": "TouchPanID",
										"value": "-1"
									}
								}
							],
							"sid": 817710673261225,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 356051675310054,
											"parameters": {
												"variable": "TouchZoomID",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 527001134656734,
											"parameters": {
												"variable": "TouchPanID",
												"value": "TouchZoomID"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 368019317511262,
											"parameters": {
												"variable": "TouchZoomID",
												"value": "-1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 427473525957274,
											"parameters": {
												"variable": "TouchLastX",
												"value": "Touch.XForID(TouchPanID, \"UI\")"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 677171347638312,
											"parameters": {
												"variable": "TouchLastY",
												"value": "Touch.YForID(TouchPanID, \"UI\")"
											}
										}
									],
									"sid": 859740675936589
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 799260087316073,
									"parameters": {
										"variable": "TouchZoomID",
										"comparison": 0,
										"value": "Touch.TouchID"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 147840490602567,
									"parameters": {
										"variable": "TouchZoomID",
										"value": "-1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 716076158816084,
									"parameters": {
										"variable": "TouchLastX",
										"value": "Touch.XForID(TouchPanID, \"UI\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 225133464477079,
									"parameters": {
										"variable": "TouchLastY",
										"value": "Touch.YForID(TouchPanID, \"UI\")"
									}
								}
							],
							"sid": 315401216090987
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 218531258319181,
							"parameters": {
								"key": 187
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 958542980863833,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 488012871793117,
							"parameters": {
								"layer": "\"Game\"",
								"scale": "clamp(InitialScale + 1 * dt, minScale, MaxScale)"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 988410795044054,
							"parameters": {
								"layer": "\"BG\"",
								"scale": "LayerScale(\"Game\")"
							}
						}
					],
					"sid": 380050891548844,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 809347557124826,
							"parameters": {
								"direction": "up"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 265244920424644,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 184218748620154,
							"parameters": {
								"layer": "\"Game\"",
								"scale": "clamp(InitialScale + 5 * dt, minScale, MaxScale)"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 610097288927735,
							"parameters": {
								"layer": "\"BG\"",
								"scale": "LayerScale(\"Game\")"
							}
						}
					],
					"sid": 863151459271077,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 967829930942547,
							"parameters": {
								"key": 189
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 445281941760378,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 615760210146109,
							"parameters": {
								"layer": "\"Game\"",
								"scale": "clamp(InitialScale - 1 * dt, minScale, MaxScale)"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 735651536008051,
							"parameters": {
								"layer": "\"BG\"",
								"scale": "LayerScale(\"Game\")"
							}
						}
					],
					"sid": 868630627755720,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 534093345012016,
							"parameters": {
								"direction": "down"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 222896850724332,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 318211431100372,
							"parameters": {
								"layer": "\"Game\"",
								"scale": "clamp(InitialScale - 5 * dt, minScale, MaxScale)"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 599748940193598,
							"parameters": {
								"layer": "\"BG\"",
								"scale": "LayerScale(\"Game\")"
							}
						}
					],
					"sid": 374904246632052,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 869305269241514,
							"parameters": {
								"key": 87
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 843337987363289,
							"parameters": {
								"x": "scrollx",
								"y": "scrolly - 400 * dt"
							}
						}
					],
					"sid": 907552827902668
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 536784194005425,
							"parameters": {
								"key": 83
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 722770119266368,
							"parameters": {
								"x": "scrollx",
								"y": "scrolly + 400 * dt"
							}
						}
					],
					"sid": 903959736133675
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 337746849976356,
							"parameters": {
								"key": 65
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 345141754139328,
							"parameters": {
								"x": "scrollx  - 400 * dt",
								"y": "scrolly"
							}
						}
					],
					"sid": 968434351854700
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 614045596199830,
							"parameters": {
								"key": 68
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 736795997019385,
							"parameters": {
								"x": "scrollx  + 400 * dt",
								"y": "scrolly"
							}
						}
					],
					"sid": 565750069680589
				}
			],
			"sid": 292331183861215
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Debugging Tools",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 422279165008496,
							"parameters": {
								"object": "CodeBlock"
							}
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "logParent(runtime.objects.CodeBlock.getFirstPickedInstance())"
						}
					],
					"sid": 345871497530323,
					"disabled": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 394566829683985,
							"parameters": {
								"key": 88
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "CodeBlock",
							"sid": 203838345450058,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						}
					],
					"sid": 603891997175912,
					"disabled": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 755901173792903,
							"parameters": {
								"key": 90
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "CodeBlock",
							"sid": 423972542778341,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "enabled"
							}
						}
					],
					"sid": 103616995341753,
					"disabled": true
				}
			],
			"sid": 371561682910378
		}
	],
	"sid": 808040494368574
}